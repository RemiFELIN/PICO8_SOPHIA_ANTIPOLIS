pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
  
keys={btns={},ct={}}
pin="aaaaaaaaaabbbbbb33333bbbbaaaaaaaaaaaaaaabbbbbbbbbbbb3bbbbbaaaaaaaaaaaabbbb3bbbb3bbbbbbbbbbbaaaaaaaaaabbbb33bbb333bbbbbbbbbbbbaaaaaaabbb33333bb33bb33bbbbb333bbaaabbb3bb33333bbbbbbb333bbbbb33baabbb3333333333bbb3bbb3333333bbbbab333333333333b3b3bbbbbbbb333b33b33333333333333333bbbbbbbbb33bbb333333333333333333333333bbbbbbbb3333333333333333333333333333333b33333344333333333333333333333333333333444333333333334443333333333a333334433333333334443333334333aa333334443333333334433333334433aaa3333344333333333433333344443aaaaaa33344433433444433333444444aaaaaaa333444443344444333344aaaaaaaaaaaaaa44444444444444444aaaaaaaaaaaaaaaaaa444444444444aaaaaaaaaaaaaaaaaaaaa44444aaa444aaaaaaaaaaaaaaaaaaaaaa4444aa4444aaaaaaaaaaaaaaaaaaaaaa4444aa444aaaaaaaaaaaaaaaaaaaaaaa4444aa444aaaaaaaaaaaaaaaaaaaaaaaa444a4444aaaaaaaaaaaaaaaaaaaaaaaa44444444aaaaaaaaaaaaaaaaaaaaaaaa44444444aaaaaaaaaaaaaaaaaaaaaaaa44444444aaaaaaaaaaaaaaaaaaaaaaaa44444444aaaaaaaaaaaaaaaaaaaaaaaa444444444aaaaaaaaaaaaaaaaaaaaaa44444444444aaaaaaaaaaaaaaaaaaaa4444444444444aaaaaaa"
valbonne="66777766666666766667766666666666d66777777766666666666666666666666666666666666666666666666666677766776677766776677766666666777777777677777666777766677776f66777655567777777777666666666666666666666666666666666667777777766777776566777777777776667766666677777777655577765557777ff66777ff767776ff56777555777656666666677777777777777777777666666666677776556777ff567776ff77776f66776665667775567765f567765f67777ff67777ff667776ff67776555666666667777666666ccccccccddd6666677776666666666ff67774556777ff677776f77776655567765556765f66776ff67777ff6777fff66f777ff6777f566666667776cccccccccccccccccc1111111ddd677776666665567774557776ff66777ff677766ff56776545676ff677776f677765f6677f5666f776f667776666667766ccccccccccccccccccccc11111111111116767766666667645677765f667765566666ff4f677654577f4ff776656666d55f656666666667ff667666667766cccccccccc66c66666666666666666d11111111d66776666665555566666666655665566644f67765567f94f99f55555dd555f65555666666f66666666777cccccccccc776656766666766666666556711111111111677766655555565d6655555765566644666766666994f99f55511d5555555555dd6d66f666666776ccccccccc665556d566666666666666665467111111111111166776665555555665d5556555666445d6666666994449455511d1555555555dd5666f666677cccccccc66dddd5556555666666666666f66d677111111111111111d77766655555555555555555dd55dd6666666ffffff6666666666666666666666666677ccccccccc76666666666666667777776777666667611ddd555111111111d6766656666666666666666666667677777766667777767777766667666666666776cccccc666777767777777777777677777776766776166777f77d1111111111667666777777777666777666677777777765f66776fff7776fff676666666677cccccc76f677776557777767777765577777ff66771157777ff777d111111111117766665f777765556775ff667776677764f567766ff67764ff67666666776cccccc66fff77775ff6777fff77764ff6777ff7676d117f777f77777661111111111d776665f77654f56765ff6577655676644567766ff6766ff6676666677cccccc6676fff7777fff7777fff777645f67777f677d116fff777777777761111111111d67666677654456755ff65776ff6766445667666f666654666666676cccccc77776ff67776fff7777ff67766ff67777666711116fff777776777676111111111116776677654f566555655677ff77655f5665556556665666666776cccccc67766666666666666666666666666666655676111d7fff66666566666611111111111166766655ff66655555567666676f666f655555555666666677cccccccc77766666666666666666666666666666556761111d6656655555555556711111111111116766566676555551d66666667777776555555555dd66676cccccccccc6777777777777777777777777777776556761111766666555555555556d1111111111111676666776555551d66666667777776555555555666676ccccccccccccccccccccccccccccccccccccccc67656771111176d6555555555555556d11111111111116766677655555ddd666666777777666666666666676cccccccccccccccccccccccccccccccccccccccc676667d11111766666d555556666666d1111111111111167666666666666666666677666777777777776676ccccccccccccccccccccccccccccccccccccccccc777767d1111177777777ff67777766771111111111111116766667777777777667776f5577776567776676ccccccccccccccccccccccccccccccccccccccccc7f777761111117666777ffff7777fff77611111111111111167666776666777755677ffff67764ff776676cccccccccccccccccccccccccccccccccccccccccc7f677761111117555777ffff7777fff777d1111111111111116766666555777ffff77f4ff67764ff76676cccccccccccccccccccccccccccccccccccccccccc7ff677761111117645777ffff7777fff7776111111111111111167666f4456775ffff7f4456776fff76676ccccccccccccccccccccccccccccccccccccccccc6ff66767111111176457774ffff777fff77771111111111111111167666ff467754fff6f45566664ff6676ccccccccccccccccccccccccccccccccccccccccc665f656771111111764677ffffff777fff6777d1111111111111111d7666ff567754ff66f45566e844667ccccc6ccccc7666666677766666677666777667777676555d67711111117666776fffff6755456765711111111111161111d76666666f44ff666666664844676cccc67cccc663366666666666d6666666666d56665666656666711111117766666ffff66f55555f556d111111111167611116766666654fff66666666444667cccc667cccc633356666666666666666666665555555656666667111111167666666ff666ff554ff5566111111111176661111776666655fff5666666644f67ccccc6676cc766666666666666666666ff7776d5666d66666666771111111d767666666666ff66fff5667d11111111177666111176666666f766777677777676cccc6777cc676677777777777776777777777777777777777777771111111676777776677777777777777d11111111167777511167677777777776556777666cccc66677cc7655677776677777ff67777fff77765567777645677711111116767777f55f7777ff77777f77111111111177667111177677776567765f6777676cccc66676c675ff67776ff67776ff6677ffff77765f56777fff67771111111d666777f4446777fff7777ff7111111111176ff6d11117667765556764ff67677cccc65667cc67fff677655f5777ff45677ffff77754f55777f44f777111111116667774ffff777fff7776fff6111111111676f67d1116767764f567644f7667cccc67f676cc77fff67765ff567774556777fff7775ff45777f44f777111111116767774ff4f777ff67777f4f6111111111d76f676111d76676ff67664ff6676cccc6f5676c6666ff66765ff567774556776ff56676fff6777f44f77711111111d7677744f4f76556556764446d11111111d6665771111676665f66e44f4e676ccc776567cc76666666555555667665566555555566f456676f44667711111111176566fffff6555d55566f4566111111111676d77711117666655648448f77cccc6d5676cc6766666625555556666666655555555666666665f5d66711111111176566666666555555565f44661111111116765d666111676d65664888e67cccc66d567cccc776666655555555666666555555555667766666d666d7611111111d7666666666555555556ffff7111111111d7655556111176665d64eeef67cccc6dd676ccccc77766666655556666666655565556666766666666666611111111d766666666655555556677ff651111111117655556d11167666667777676cccc77767ccccccc667776666666677777777777777776667777666666761111111116677777777777777777777777111111111777777761116767777776666cccc777776cccccccccccc7777666666667777766777765f56777f4f77776111111111676777777777fff7777777777111111111677777771111776667765676cccc6f7676cccccccccccccc66777666666777644677764f66776ff4f7777d1111111167677ff77777fff77776ff67761111111117777766611167655776467cccc6f5667ccccccccccccccccccc67766666676fff77764ff6776444f7766d11111111d7676ff77777fff7776445677611111111177777556d11176ff67ff67cccc7f6676ccccccccccccccccccccc677766666fff77654f65665444f7756d1111111117776f6f7777fff7776444667611111111177777556611177ff777f76ccc66f667cccccccccccccccccccccccc66776666ff765055505645f44f6567111111111d76666677765f56777f456677d11111111767776566111d76676667cccc6ddd66ccccccccccccccccccccccccccc6776664e655555056ffffff6557111111111176666666555f55577fff6667d11111111677776667111d76565567cccc6d11d66cccccccccccccccccccccccccccc67766e25551155677ff77655661111111116766666555555556ffff6666d11111111666666667d11166dd5576cccc6ddd1d66666666ccccccccccccccccccccccc776665551155677777665566111111111d76666d55555555667766656711111111665666667711167655676ccc76ddddd6666666667cccccccccccccccccccccc677665555556677776f5666d1111111116666665565655567776665671111111166566677771116766667cccc777677777777777777766ccccccccccccccccccc67766677677777777776666111111111676666667777667777777777111111116777777777d111777777cccc77ff67777777777777777776cccccccccccccccccc676677777777777776ff71111111111766666666677777767777771111111167777ffff76111777777ccc6764457777fff7777777777776cccccccccccccccccc676666777fff77775456611111111167666666666667765567777611111116777644ff76111777777ccc6764456777ff46777ffff776fff6ccccccccccccccccc67665677ff46777555671111111111677777776666665546776661111111666775fff66111d7777cccc6764455777f446777ffff776ff4f77cccccccccccccccc67656777ff677765567d1111111111666667777776666667766611111117657754ff76d1117777cccc6654455676f456777f44f7777f4f7766ccccccccccccccc6766665f55676555676111111111111d6666616677666777666111111176676544677d1117767cccc7444455555555556655556777ff776d66ccccccccccccccc766555565566555d67d1111111111d67666766156766676566111111165665554567d1117667cccc7244444555555055550005677fff66d676cccccccccccccc67655555556dd55d6661111111111677d11dd6d11667665566111111165665555556d1117667cccc6544444555550055555500d66ff66dd6776cccccccccccccc765555555ddddd66671111111111676111ddd6111d7765566111111665555555556d1116667cccc6555555555555555555555d666666d677767cccccccccccccc765555555ddd666771111111111d76d5dddd661111776566111111765555556556d1116666cccc7777677666666666666666777777777777776ccccccccccccc666666666677766761111111111d6666666677d111d6666611111676666666676761116776cccc7777ff77777777777767777777777776556776cccccccccccc676766677776667611111111111167667777776111167776111116ff777776f77771116776cccc777fff77776556777ff567776fff7776ff6777cccccccccccc6766f55677656761111111111111177665677761111167761111d64ff7777fff7771116776ccc6777fff77765556777f4467775fff777fff67776cccccccccccc776ff56765667d11111111111111d766556777111111dd11111d6fff777ff4f7771116776ccc6777fff77765f56777f4467775fff777f4567777cccccccccccc77fff567766761111111111111111676656777111111111111176ff77776f456771116776ccc66655f65666fff6777f4467765545677655567776cccccccccccc76454677676d111111166111111117766777761111111111d66656667764556671116776cccc65556655665f6d67f44444665555565555556766cccccccccccc7f444e7767d1111111667711111115776666671111111111655566556665555671116776cccc65556655655655544448884555655555555555566ccccccccccc7f848466761111111166667d111111d77666671111111117650565505665555671116666cccc65555555655555644488882556655555555555566ccccccccccc7f8884667d1111111d6d6666d111111d7766671111111166550055005665555671116677cccc755555566655556444444455566555555555555d7ccccccccccc7f4444676111111116656666661111111677771111111166555555555665665661116677cccc766666667666667776f6776666666666666666667ccccccccccc76666667611111111777777667d111111166611111111d766666666667666667d1116677cccc7777f666776567777555677765567777556777777ccccccccccc77777767511111111777777ff76777611111111111111d667776556777655577d1117777cccc767ff566774ff677654557765f556776ff6777667ccccccccccc77f66676111111116767777fff7776f776d671111111116777755557775ff567d1117777cccc666f4566764ff677644ff7765ff5677fff67776f7ccccccccccc7ffff671111111116757776fff77764ff7766611111111677765ff57775ff667d1117777cccc6764455677f4f77764ff67776446677ff76777667ccccccccccc7ffff6711111111d6f5777744f77664ff776671111111167777fff6777ffff67d11177777ccc6764455677fff676d44f667764566775ff6777667cccccccccc67fff676111111116755f77654677664ff7766761111111677776ff777644ff66111d77667ccc676f45f6666f65655eff666764556665ff5666467cccccccccc765ff67611111111d655f6d555dd66544f676676111111117766fff666544f47611176e1d7cccc766f666656665555d6665666f456555665554867cccccccccc7666667d11111111665555555dddd6f44f6766761111111176556ff55505556761117e81d66ccc7666666656666655566d5666f455555555554466ccccccccc66dd6666111111111765555555dddd664f6676676111111117655565555005567d1117481d66ccc7766666665666655d66d55655555555655554476ccccccccc66d66676111111111755555555dd55664fd76d67d11111111765556555555556711167446666ccc6766666666667766667767776677666666666676ccccccccc7667767611111111176667666666667666677667d11111111776667666666667611167777777cccc76776676666777765667776556776655567767cccccccccc7777777111111111177777766676667655677777111111111777777777777767d11167777766cccc666667765ff677655567775ff6776554567777ccccccccc7777656711111111177ff7776666667655f567777111111111777777777776567111d656776566ccc676f67764ff77765ff67775ff677654456767ccccccccc66776556711111111177fff7766fff66654f567777111111111777777777776676111d646776567ccc676ff77744f7777fff67774fff77654456667ccccccccc66776567711111111177f777766f4f67654f567777111111111777777777776676111664f766ff7cccc676f7765f667765ff5677555677654f66676cccccccc675776567611111111177f77776ff4f67665f5667771111111117777ff77777766d1117ff6766ff66ccc67666655f566655555566555d666fff6666cccccccc7765665567511111111176f766766fff66555f55567711111111177765f65777677111666f66655656cccc766666556665555555d1d55dd666666676cccccccc6655e65567511111111675f6dd666ff6665556555d661111111117765555567767111166ddd65555566ccc676666656665555555d1dddddd7766676cccccccc655554555575111111116655511d66655d65566555d711111111117755555556676111d666d666555556cccc76566666665555555dddddddd776677cccccccc75555485555751111111166555555dd555555567555d71111111116765555555667d11166666666666667cccc676677677766666666666666676667cccccccc6666666666667511111111666666666666666666766667111111111677666666667611117666666666d6677cccc7677666776667666776556776667ccccccccc777767777777751111111167777777777677777777777711111111167777655666761116777656766555677cccc676667f77667f66676556666667cccccccc77777f557777667511111111677ff777776656777f46777711111111167777ff55677111d7776555666ff46776cccc766fff6766fff667654f66677ccccccc66777774f567775f751111111167ff66777ff55677f4ff677611111111166777fff667d111677765556664446777ccccc76fff5766ffff6765f66677ccccccc6f667777fff77765f751111111167ff6f7765ff5567f4ff777611111111d7677644f676111d777654f6666f4f66777cccc676f55766ff4f666666776ccccccc66f6667776f677776f751111111577ffff7764f4456764ff667611111111d7776555667d111677775ff6666fff666666cccc76655f6664f66666677ccccccc6766666677655577765f751111111576ff6f6764ff46776555667d11111111d777655667d1111666776ff6766ff556d156cccc67655f666f66666776cccccc66666566d565555556655f7511111115744444477fffff7655555661111111116777655676111d6666677f6776d6555511156cccc67665666666677ccccccc666ddd55566555555555555675111111157444444faa9aaaf5555556611111111177775566651116666667667775555555111d6ccccc766666667776cccccc76dddddd55555555555555555566111111157544444faaaaaaa555556761111111117766566761115666656666767666d55dddd667cccc677677766ccccccc666666666666666666666666666677111111157666666fffff7ff6666667d11111111776666676111176666666677677666666666677cccccc677ccccccccc67777777777777777777755677777677111111157777777777656777766777111111111777766761111677656777766776656666777776cccccccccccccccc777777777656777655677765556777f5f711111115777656777655577765f6771111111167666677d1116776555777655676556766cccc6cccccccccccc6767777ff777774ff67764f677764f55776fff661111115776f6677764f677755f67d111111116556677611117775ff56776fff76546ccccccccccccccccccc67ff777fff777774ff77764f6777644f5676fff661111111676fff777fff67765ff67d11111111656677d111167765ff56776fff76f44f7777777677776cccccc7667776f677776fff7777ff677764f55675fff56d111111677fff77774f6776556661111111166667761111677765ff56777ff676644f66655f56776f7cccccc766777656667644446776555677654556655ff46d111111676ff677654f6776556761111111177677d11116667765ff567766f6666f45665555556644f6ccccc67666556656765245d665551d6555f666555f656611111167556556555555665667d111111117777d11116ffd6655ff55dddd6dd665533555555566444466cccc6766556655655545dd65551565556666555f655611111167655555555555555677111111111676611116d22ddd55ff55ddddddd333333355555554444446ccccc676666655555555dd6555156555d666555f5556611111d765555555555555567111111111111111116d11ddd155ff555dddddd6666666666666666666667ccccc676666666666666666656666656666666666667d111117666666666666666671111111111111111666666666666666666666677667777777777777f67777ccccc677666777777777776667777656777765677776111117767777777777776761111111111111111777777777777777777667776ff677776667777ff5677776ccccc6766667766777764ff77764556776fff677776111117667777765677667d11111111111111677777ff777777777776566776ff56776f5567764f56777666cccccc77666644677764ff777645567764ff6777f711111666677764556667d111111111111166777777fff777fff77775666776ff56776fff67764ff57765ff6cccccc777666ff77764ff77764ff77754ff6777ff61111d76677745ff667711111111111116fff67777ff7777fff77775f667754f56777fff77764f55776fff67cccccc667666667654ff677655677765ff5677ff66111d6766666666676511111111111d66ffff776644677764567765f666f45445676ff677764f55777fff77766ccccc6776666655556765555d6765f5557fff666111d77666666677511111111111d776ffff7655555567d55677555655444f446655f5d66544556666ff766566ccccccc677666666d6555555565555556ff666777dd56776667761111111111d666776ffff7d55445566dddd76556555ef6554251555155554455556666d555566cccccc66776666665555555f55556566666666666116677766111111111d66dd1665ffff7555445566dddd665f6655e6666e211555115555555555555550555567ccccccc677766666666556555565666666666676111111111111111116dddd1d55666f7555445566dddd66546655f6666e6dd555dd5555555dd666665555d5567cccccccc6677776666666666666666666666776111111111111111666dddddd66666f7655ff56666ddd66666666777777777777777777777776667777777777766ccccccccccc7777776666666666666666777d111111111111d66777765677776567777777667777777777666777777777777777776666777556677777677777ff6cccccccccccc666667777777777776667d11111111111d776677764f667775556777777777776667776555777fff7777fff77775f4677655f677765567776ff677666ccccccccccccc6666666666cc1111111111166667765677764f7777655557776ff777765f56775f75677fff77764447777ff457755ff577755567775f6677765666ccccccccccccccccccccccc1111111176f67776fff677f4ff777656f5776f4466776f7f67656f5577f4f777f4447777f4457655ff577665566665ff66776ff677666666ccccccccccccccccc666666664f6777666f67764f777766ff5676f446677ffff6765ff6566f45677744577775456665545566566665665ff56776ff67777445666666666766666666ffff76555f56676f6f67764f77775566567654566665ff65765ff55"
logo_miage="1111111111111111111111111111111111111111111111111111111111111111111111111777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117777777771111111111111111111111111111111111111177777777777777777777777777777111111111111111111117777777777711111111111111111111111111111111111111777777777777777777777777777771111111111111111177777777777777111111111111111111111111111111111111117777777777777777777777777777711111111111111177777777777777771111111111111111111111111111111111111177777777777777777777777777777111111111111177777777777777777711111111111111111111111111111111111111777777777777777777777777777771111111111117777777777777777777111111111111111111111111111111111111177777777777777777777777777777711111111111777777777777777777771111111111111111111111111111111111111777777777777777777777777777777111111111177777777777777777777111111111111111111111111111111111111111111111111111111111111111111111111111117777777777777771111111111111111111111111111111111111111111111111111111111111111111111111111111111777777777777711111999999999111111111111111111111111111111111111111111111111111111111111111111111177777777777711119999999999999999111111111111111111111111111111111111111111111111111111111111111117777777777771111999999999999999999911111111111111111111111111111111111111111111111111111111111111777777777771111111999999999999999999991111111111111111111111111111111111111111111111111111111111177777777777111111119999999999999999999991111111111111111111111111111111111111111111111111111111111777777777711111111199999999999999999999991111111111111111111111111111111111111111111111111111111177777777771111111111199991111199999999999991111111111111111111117777777711111111111111111111111111777777777111111111111111111111111199999999991111111111111111111177777777777711111111111111111111177777777711111111111111111111111111119999999991111111111111111111777777777777771111111111111111111777777777111111111111111ccc777ccc111119999999991111111111111111177777777777777777111111111111111177777777711111111111111ccc777777777c71119999999991111111111111111777777777777777777111111111111111777777777111111111111cccc7777777777c7711199999999111111111111111177777777777777777777111111111111177777777111111111111cccc777777777cccc77111999999991111111111111117777777777777777777771111111111177777777711111111111ccccc777777777cccc77711199999991111111111111117777777777777777777777111111111177777777711111111111ccccc7777777777cccc77c111999999911111111111111111111111777777777777771111111117777777711111111111cccccc7777cc7777cccc777c119999999111111111111111111111111177777777777711111111177777777111111111117777ccc777ccc7cc777cc77c1119999991111111111111111111111111117777777777711111117777777771111111111c77777ccccccccccccc77c77cc119999999111111111111111111111111111777777777771111117777777711111111111777777cc77cccccccc777c777c11999999911111111111111111111111111117777777777111111777777771111111111cc7777ccc777ccccccc777cc77c11999999911111111111111111111111111111777777777711111777777771111111111cc7777ccc777cccccc777cccc7711199999911111111111111111111111111111177777777711111777777771111111111cc777ccc7777ccccccccccccc7711199999911111111111111111111111111111117777777771111777777771111111111ccc77ccc7777cccccccccccccc711199999911111111111111111111111111111117777777771111777777771111111111ccc77cc7777cccccccccccccc7711199999911111111111111111111111111111111777777771111777777771111111111ccc77cc7777cccccccccccccc77119999999111111111111111111111111111111117777777711117777777771111111111cc777cc7777ccccccccccccc77119999999111111111111111111111111111111117777777711117777777771111111111ccc777c77777cccccccccccc77119999999111111111111111111111111111111111777777771111777777771111111111cccc777c7777cccccccccccc775199999911111111111111111111111111111111117777777711117777777711111111111cccc777c7777cccccccccccc11999999911111111111111111111111111111111117777777711117777777711111111111cccc7777c7777cccccccccc1119999999111111111111111111111111111111111177777777111177777777711111111111cccc777cc777cccccccccc11999999911111111111111111111111111111111111777777771111177777777111111111111ccc777cc777ccccccc771119999999111111111111111111111111111111111117777777711111777777777111111111111cc7777c777ccccccc7111999999911111111111111111111111111111111111177777777111117777777771111111111111cc7777777cccccc1111999999991111111111111111111111111111111111177777777111111177777777711111111111111c777c777cccc111199999999111111111111111111111111111111111111777777771111111777777777111111111111111117cc7cc1111199999999911111111111111111111111111111111111117777777711111111777777777111111111111111111111111199999999999111111111111111111111111111111111111777777777111111117777777777111111111111111111111111999999999911111111111111111111111111111111111177777777711111111117777777777111111111111111111111119999999991111111111111111111111111111111111111777777777111111111177777777777111111111111111111111199999999117111111111111111111111111111111111177777777771111111111177777777777111111111111111111111199999111777111111111111111111111111111111117777777777111111111111177777777777111111111111111111111999111177777111111117771111111111111111111777777777711111111111111177777777777711111111111111111111111177777777111117777771111111111111111777777777777111111111111111677777777777771111111111111111111177777777777111177777777111111111111177777777777711111111111111111677777777777777111111111111111177777777777777117777777777771111111777777777777771111111111111111111777777777777777777111111177777777777777777711777777777777777777777777777777777111111111111111111111177777777777777777777777777777777777777771117777777777777777777777777777777711111111111111111111111177777777777777777777777777777777777777111117777777777777777777777777777771111111111111111111111111177777777777777777777777777777777777711111111777777777777777777777777777111111111111111111111111111117777777777777777777777777777777711111111111777777777777777777777777711111111111111111111111111111111777777777777777777777777777711111111111111177777777777777777777111111111111111111111111111111111111177777777777777777777777711111111111111111117777777777777777111111111111111111111111111111111111111111777777777777777777111111111111111111111111117777777771111111111111111111111111111111111111111111111111777777777711111111111111111"
function keys:update()
  for i=0,13 do
  if band(btn(),shl(1,i))==shl(1,i) then
  if keys:held(i) then
  keys.btns[i]=2
  keys.ct[i]=(keys.ct[i]+1) % 30
  else
  keys.btns[i]=3
  end
  else
  if keys:held(i) then 
  keys.btns[i]=4
  else
  keys.btns[i]=0
  keys.ct[i]=0
  end
  end
  end
end

function keys:held(b) return band(keys.btns[b],2) == 2 end
function keys:down(b) return band(keys.btns[b],1) == 1 end
function keys:up(b) return band(keys.btns[b],4) == 4 end
function keys:pulse(b,r) return (keys:held(b) and keys.ct[b]%r==0) end

--snipet pour les dialogues
-- call this before you start using dtb.
-- optional parameter is the number of lines that are displayed. default is 3.
function dtb_init(numlines)
dtb_queu={}
dtb_queuf={}
dtb_numlines=3
if numlines then
dtb_numlines=numlines
end
_dtb_clean()
end

-- this will add a piece of text to the queu. the queu is processed automatically.
function dtb_disp(txt,callback)
  local lines={}
  local currline=""
  local curword=""
  local curchar=""
  local upt=function()
    if #curword+#currline>29 then
      add(lines,currline)
      currline=""
    end
    currline=currline..curword
    curword=""
  end
  for i=1,#txt do
    curchar=sub(txt,i,i)
    curword=curword..curchar
    if curchar==" " then
      upt()
    elseif #curword>28 then
      curword=curword.."-"
      upt()
    end
  end
upt()
if currline~="" then
  add(lines,currline)
end
add(dtb_queu,lines)
if callback==nil then
  callback=0
end
  add(dtb_queuf,callback)
end

-- functions with an underscore prefix are ment for internal use, don't worry about them.
function _dtb_clean()
dtb_dislines={}
for i=1,dtb_numlines do
add(dtb_dislines,"")
end
dtb_curline=0
dtb_ltime=0
end

function _dtb_nextline()
  dtb_curline+=1
  for i=1,#dtb_dislines-1 do
    dtb_dislines[i]=dtb_dislines[i+1]
  end
  dtb_dislines[#dtb_dislines]=""
end

function _dtb_nexttext()
  if dtb_queuf[1]~=0 then -- ~= ===> not egal
   dtb_queuf[1]()
  end
  del(dtb_queuf,dtb_queuf[1])
  del(dtb_queu,dtb_queu[1])
  _dtb_clean()
end

-- make sure that this function is called each update.
function dtb_update()
  if #dtb_queu>0 then
  if dtb_curline==0 then
  dtb_curline=1
  end
  local dislineslength=#dtb_dislines
  local curlines=dtb_queu[1]
  local curlinelength=#dtb_dislines[dislineslength]
  local complete=curlinelength>=#curlines[dtb_curline]
  if complete and dtb_curline>=#curlines then
  if keys:down(5) then
  _dtb_nexttext()
  return
  end
  elseif dtb_curline>0 then
  dtb_ltime-=1
  if not complete then
  if dtb_ltime<=0 then
    local curchari=curlinelength+1
    local curchar=sub(curlines[dtb_curline],curchari,curchari)
    dtb_ltime=1
    if curchar~=" " then
      sfx(8)
    end
    if curchar=="." then
      dtb_ltime=6
    end
    dtb_dislines[dislineslength]=dtb_dislines[dislineslength]..curchar
  end
  if keys:down(5) then
    dtb_dislines[dislineslength]=curlines[dtb_curline]
  end
  else
  if(keys:down(5)) then
    _dtb_nextline()
  end
  end
  end
  end
end

-- make sure to call this function everytime you draw.
function dtb_draw()
if #dtb_queu>0 then
local dislineslength=#dtb_dislines
local offset=0
if dtb_curline<dislineslength then
offset=dislineslength-dtb_curline
end
rectfill(cam_x+2,cam_y+124-dislineslength*8,cam_x+126,cam_y+126,7)
rectfill(cam_x+3,cam_y+125-dislineslength*8,cam_x+125,cam_y+125,0)
if dtb_curline>0 and #dtb_dislines[#dtb_dislines]==#dtb_queu[1][dtb_curline] then
print("\151",cam_x+118,cam_y+120,1)
end
for i=1,dislineslength do
print(dtb_dislines[i],4+cam_x,cam_y+i*8+119-(dislineslength+offset)*8,7)
end
end
end

--fin du snippet

function _init()
  particles={}
  checkpoint={}
  sparks={}
  projectils = {}
  pnj={}
  pnjs={}
  blocs = {}
  nbr_bloc = 0
  create_p_volant(124,61,3,108,156) --dessine 2 bloc en (124,61*8) qui se deplace de (108,61*8) en (156,61*8)
  create_p_volant(424,61,3,408,456)
  guitare={
    sp = 42,
    x = 848,
    y = 480,
    w = 8,
    h = 8,
    anim = 0
  }
  create_pnj("tounsi",43,570,480)
  create_pnj("renevier",39,104,296)
  create_pnj("ordinateur",44,864,480,16)
  for i=1,200 do
    add(sparks,{
      x=0,y=0,velx=0,vely=0,
      r=0,alive=false
    })
  end
  create_checkpoint(592,488)
  --simple camera
  cam_x=0
  cam_y=0
  -- variable globale
  game_state="menu"
  gravity=0.3
  friction=0.8
  interaction = false
  start_bulle = false
  checkpointx = 780 --pour memoriser le dernier checkpoint
  checkpointy = 460
  checkpoint_number = 0 --pour l'animation du checkpoint
  spnum = 0
  guit_found = false --si buffa a trouver la guitare
  tmp = 0
  reattak = true --pour creer un delai entre les attaques
  level=1
  flash     = false
  del_firework   = 0
  
  --map limits
  map_start=0
  mapx_end=1024
  mapy_end = 512
  intro_init()
  dtb_init()
  player_reset()
end

-->8
--update and draw

function _update()


  if game_state == "menu" then
  skydeg += 0.0005
    if keys:down(5) then
      cam_y=372
      game_state = "plot"
    end
  
  elseif game_state == "plot" then
    if (keys:down(5))  then
      game_state = "game"
    end

  elseif game_state == "game" and player.alive then
    if dialog then
      dialog_update()
    else
      player_update()
      droid_update()
      droid_animate()
      if guit_found then
        player_guit_animate()
      else
        player_animate()
      end
    end
    projectils_update()
    if not guit_found then
      guitare_animate()
    end
    if checkpoint_number> 0 then
      checkpoint_animate(checkpoint_number)
    end
    --simple camera
    cam_x=player.x-64+(4)
    if cam_x<map_start then
      cam_x=map_start
    end
    if cam_x>mapx_end-128 then
      cam_x=mapx_end-128
    end
    if level == 2 then
      cam_y = 224
    else
      cam_y=player.y-64+(player.h/2)
      if cam_y<map_start then
        cam_y=map_start
      end
      if cam_y>mapy_end-128 then
        cam_y=mapy_end-128
      end
    end
    foreach(blocs,update_pv)
    for i=1,#blocs do
      collide_pv(blocs[i][1],blocs[i][#blocs[i]])
    end

  elseif game_state == "fin" then
    cam_x = 0 cam_y = 0
  end

  if not player.alive then
    if del_acc == 0 then
      player_reset()
    else
      del_acc -= 1
    end
  end

  explosion_update()
  foreach(particles,update_part)
  keys:update()
  camera(cam_x,cam_y)
end




function _draw()
  cls()
  --menu
  if game_state == "menu" then
    intro()

  elseif game_state == "plot" then
    rectfill(0,500,127,127,1)
    print(" et si la miage devenait\n ...\n\n votre pire cauchemar !!! ",8,388,7)

  elseif game_state == "game"   then
    cls()
    map(0,0,0,0,128,64)
    if level ==1 then
      --dessine les arbres
      if (player.x < 300) then
        --str_to_spr(pin,44,464,32,32)
      elseif player.x < 720 then
        str_to_spr(pin,530,464,32,32)
        str_to_spr(pin,595,464,32,32)
      else
        str_to_spr(pin,800,464,32,32)
        str_to_spr(pin,895,464,32,32)
        str_to_spr(pin,970,464,32,32)
      end
      ordinateur_animate()
    elseif level == 2 then
      print("EXIT",365,288,rnd(15))
    end
    --dessine les checkpoints
    for check in all(checkpoint) do
      spr(check.sp,check.x,check.y,1,1,check.flp)
    end
    --dessine les npc
    for pn in all(pnjs) do
      spr(pn.sp,pn.x,pn.y,pn.w/8,pn.h/8)
    end
    for droid in all(droids) do
      spr(droid.sp,droid.x,droid.y,droid.w/8,droid.h/8,droid.flp)
    end
    --dessine les platformes volantes
    for bloc in all(blocs) do
      for i=1,#bloc do
        spr(bloc[i].sp,bloc[i].x,bloc[i].y)
      end
    end
    if player.alive then
      spr(player.sp,player.x,player.y,player.w/8,2,player.flp)
      for projectil in all(projectils) do
        spr(projectil.sp,projectil.x,projectil.y,1,1,projectil.flp)
      end
    end
    if not guit_found then
      spr(guitare.sp,guitare.x,guitare.y)
    end
    if interaction then 
      if pnj.name == "ordinateur" then 
        drawx(pnj.x + 4 ,pnj.y - 8) 
      else
        drawx(pnj.x ,pnj.y - 8) 
      end
    end
    if dialog  then dialog_draw() end

  elseif game_state == "fin" then
    str_to_spr(valbonne,0,0,128,128)
    firework()
  end

  draw_explosion()
  foreach(particles,draw_part)

end

-->8
--collisions
function collide_map(obj,aim,flag)
  --obj = table needs x,y,w,h
  --aim = left,right,up,down

  local x=obj.x  local y=obj.y
  local w=obj.w  local h=obj.h

  local x1=0	 local y1=0
  local x2=0  local y2=0

  if aim=="left" then
    x1=x-1  y1=y
    x2=x    y2=y+h-1

  elseif aim=="right" then
    x1=x+w-1    y1=y
    x2=x+w  y2=y+h-1

  elseif aim=="up" then
    x1=x+2    y1=y-1
    x2=x+w-3  y2=y

  elseif aim=="down" then
    x1=x+2      y1=y+h
    x2=x+w-3    y2=y+h
  end

  --pixels to tiles
  x1/=8    y1/=8
  x2/=8    y2/=8

  if fget(mget(x1,y1), flag)
  or fget(mget(x1,y2), flag)
  or fget(mget(x2,y1), flag)
  or fget(mget(x2,y2), flag) then
  return true
  else
  return false
end

end



function broken_titles() 
  local x1=player.x+2  local y1=player.y+player.h
  local x2=player.x+player.w-3  local y2=player.y+player.h
  --pixels to tiles
  x1/=8    y1/=8
  x2/=8    y2/=8
  if (mget(x1,y1) == 97 ) then
    explode_titles(x1,y1)
  end
  if (mget(x1,y2) == 97 ) then
    explode_titles(x1,y2)
  end
  if (mget(x2,y1) == 97 ) then
    explode_titles(x2,y1)
  end
  if (mget(x2,y2) == 97 ) then
    explode_titles(x2,y2)
  end
  sfx(22)
end

function explode_titles(x,y)
  if del_title== 0 then
    mset(x,y,103)
    for i=0,10 do
      cr_part(x*8+4,y*8+4,7,0)
    end
    del_title=12 
  else
    del_title -= 1
  end
end
-- -->8
-- --player

function dialog_update()
  dtb_update()
  if btn(0) then
    gauche = true
  end
  if btn(1) then
    gauche = false
  end
end

function dialog_draw()
  dtb_draw()
  if talked then
    if  #dtb_queu == 0 then 
      dialog=false 
      talked = false
      if level == 1 then 
        music(6) -- on reset !!!!!!!!!!!!!
      elseif level == 2 then 
        music(9)
      end
    end
  else
    music(1) -- on active l'effet !!
    if pnj.name=="renevier" then
      dtb_disp("buffa:tiens qui voila, mister renevier.")
      dtb_disp("renevier:michel aide moi ! j'ai perdu le controle de mon android studio ! c'est la panique.")
      dtb_disp("buffa:pff...pathetique.")
      talked = true
    end
    if pnj.name=="tounsi" then
      dtb_disp("buffa:salut steph.")
      dtb_disp("tounsi:bonjour michel il parait que tu aimes la musique ? la clef de l'excellence c'est de savoir se diversifier !")
      dtb_disp("buffa:tu leurs parle comme ca a tes eleves ?")
      talked = true
    end
    if pnj.name=="ordinateur" then
      dtb_disp("ordinateur:tuer tout les humains !")
      dtb_disp("buffa utilise l'attaque javascript.")
      dtb_disp("ordinateur:appuyez sur \142 pour lancer une attaque sonore.")
      talked = true
    end
  end 
end

function player_update()
  --physics
  player.dy+=gravity
  player.dx*=friction

  --controls
  if not player.down then
    if btn(0) then
      player.dx-=player.acc
      player.running=true
      player.flp=true
    end
    if btn(1) then
      player.dx+=player.acc
      player.running=true
      player.flp=false
    end
  end

  -- stop running 
  if player.running
  and not btn(0)
  and not btn(1)
  and not player.falling
  and not player.jumping then
    player.running=false
  end

  --fire
  if keys:down(4) and not player.down  and guit_found and reattak then
    add_projectil(player)
    player.attak = true
  else
    player.attak = false
  end
  --se baisser
  if keys:held(3) and not player.falling and not player.jumping and player.landed then
    player.down = true
  else
    player.down = false
  end
  --jump
  if keys:down(2) and player.landed then
    player.dy-=player.boost
    player.landed=false
  end
  --double jump
  if keys:down(2) and (player.jumping or player.falling) and player.doublejump then
    player.dy=0
    -- for i=1,6 do
    --   cr_part(player.x+player.w/2+player.dx,player.y+player.h,7,1)
    --   cr_part(player.x+player.w/2+player.dx,player.y+player.h,7,-1)
    --  end
    player.dy-=player.boost*0.7
    player.doublejump=false
 end
  --check collision up and down
  if player.dy>0 then
    player.falling=true
    player.landed=false
    player.jumping=false
    if collide_map(player,"down",0) or collide_map(player,"down",2) then
      player.doublejump = true
      player.landed=true
      player.falling=false
      player.dy=0
      player.y-=((player.y+player.h+1)%8)-1
      if collide_map(player,"down",2) then
        broken_titles()
      end
    end
    if collide_map(player,"down",3) and not player.running then
      if blocs[1][1].flp then
        player.x -= 1
      else
        player.x +=1
      end
    end
  elseif player.dy<0 then
    player.jumping=true
    del_title=12 
    if collide_map(player,"up",1) then
      player.dy=0
    end
  end
  if collide_obj(player,guitare) and not guit_found then
    guit_found = true
    plsp = 34
  end
  if collide_map(player,"left",4) and level == 1 then
      droids={}
      blocs={}
      create_droid(42,208,288-24,176,224,272,296) 
      create_droid(42,248,280,230,260,272,296)
      create_droid(42,280,288,270,296,272,296)
      create_droid(42,336,288,320,360,272,296)
      checkpointx=8 checkpointy=296
      player.x = 8 player.y = 296
      level=2
      sfx(0)
      music(9)
  end
  --check collision left and right
  if player.dx<0 then
   player.dx=limit_speed(player.dx,player.max_dx)
    if collide_map(player,"left",1) then
      player.dx=0
    end
  elseif player.dx>0 then
    player.dx=limit_speed(player.dx,player.max_dx)
    if collide_map(player,"right",1) then
      player.dx=0
    end
  end
  if collide_obj(player,pnjs[1],8) then
    interaction = true
    pnj = pnjs[1]
  elseif collide_obj(player,pnjs[2],8) then
    interaction = true
    pnj = pnjs[2]
  elseif collide_obj(player,pnjs[3],8) then
    interaction = true
    pnj = pnjs[3]
  else
    interaction = false
  end

  for droid in all(droids) do
    if collide_obj(player,droid,-1) then
      player_dead()
    end
  end

  for i=1,#checkpoint do
    if collide_obj(player,checkpoint[i])  then
      checkpoint_number = i
      checkpointx = checkpoint[i].x
      checkpointy = checkpoint[i].y
    end
  end

  if keys:down(5) and interaction and #dtb_queu==0 then
    interaction = false
    dialog = true
  end
  player.x+=player.dx
  player.y+=player.dy

  --limit player to map
  if player.x<map_start then
    player.x=map_start
  end
  if player.x>mapx_end-player.w then
    player.x=mapx_end-player.w
  end
  if player.y> mapy_end-player.h/2 then
    player_dead()
  end
  if player.running or player.jumping or player.falling then waited = false end
end

function droid_update()

  for droid in all(droids) do
    droid.dx=limit_speed(droid.dx,droid.max_dx)
    if droid.w == 16 then
      del_droid -= 1
      if del_droid < 15 then
        droid.dx = 0
        if del_droid < 7 and del_droid > 2 then
          add_projectil(droid)
        end
      else
        droid.dx*=friction
        --movement
        if droid.flp then
          droid.dx-=droid.acc
        else
          droid.dx+=droid.acc
          end
        if droid.x < droid.zonex1  then
          droid.flp = false
        end
        if droid.x > droid.zonex2 then
          droid.flp = true
        end
        droid.x+=droid.dx
      end  
      if del_droid < 0 then
        del_droid = 100
      end
    else
      droid.dx*=friction
      --movement
      if droid.flp then
        droid.dx-=droid.acc
      else
        droid.dx+=droid.acc
      end

      if droid.x < droid.zonex1  then
        droid.flp = false
      end
      if droid.x > droid.zonex2 then
        droid.flp = true
      end
    
      if droid.y < droid.zoney1 then
        droid.dy +=0.1
      end
    
      if droid.y > droid.zoney2 then
        droid.dy -=0.1
      end
      droid.y+=droid.dy
      droid.x+=droid.dx
    end
  end
end

function guitare_animate() 
  if time()-guitare.anim>.3 then
    guitare.anim=time()
    guitare.sp+=1
    if guitare.sp > 41 then
      guitare.sp = 40
    end 
  end
end

function ordinateur_animate() 
  rectfill(867,482,877,485,0)
  for i=0,10 do
    pset(867+rnd(10),482+rnd(3),3)
  end
end

function player_animate()
  if player.jumping then
    player.sp=6
    player.anim=time()
  elseif player.falling  then
    player.sp=7
    player.anim=time()
  elseif player.running then
    if time()-player.anim>.1 then
      player.anim=time()
      player.sp+=1
      if player.sp>4 then
        player.sp=2
      end
    end
  elseif player.down then
    player.sp = 8
    player.anim=time()
  else --player idle
    if time() - player.anim>3 or waited then
      waited = true
      if time()-player.anim>.3 then
        player.anim=time()
        player.sp+=1
        if player.sp>1 then
          player.sp=0
        end
      end
    else
      player.sp = 2
    end
  end
end

function player_guit_animate()

  if player.attak then
    player.anim=time()
    waited = false
    tmp=time()
    player.sp =14
    player.w = 16
    reattak = false
  end
  if time()-tmp>.2 then  
    player.w = 8
    reattak = true
    if player.jumping then
      player.sp=6
    elseif player.falling then
      player.sp=7
    elseif player.down then
      player.sp=8
    elseif player.running then
      if time()-player.anim>.1 then
        player.anim=time()
        player.sp+=1
        if player.sp>13 then
          player.sp=11
        end
      end
    else --player idle
      if time() - player.anim>3 or waited then
        waited = true
        if time()-player.anim>.3 then
          player.anim=time()
          player.sp+=1
          if player.sp>10 then
            player.sp=9
          end
        end
      else
          player.sp =11
      end
    end
  end
end

function droid_animate()
  for droid in all(droids) do
    if droid.w == 16 then
      if del_droid > 12 then
        if time()-droid.anim>.2 then
          droid.anim=time()
          droid.sp+=2
          if droid.sp>35 then
            droid.sp=33
          end
        end
      else
        droid.sp = 37
      end
    else
      if time()-droid.anim>.2 then
        droid.anim=time()
        droid.sp+=16
        if droid.sp>59 then
          droid.sp=42
        end
      end
    end
  end
end


function checkpoint_animate(x)

  if time()-checkpoint[x].anim>.5 then
    if spnum == 0 then
      checkpoint[x].sp = 112
    elseif spnum == 1 then
      checkpoint[x].sp = 113
    elseif spnum == 2 then
      checkpoint[x].sp = 114
    elseif spnum == 3 then
      checkpoint[x].sp = 115
    elseif spnum == 4 then
      checkpoint[x].sp = 114
      checkpoint[x].flp = true
    else 
      checkpoint[x].sp = 113
      checkpoint[x].flp = false
      spnum = 0
    end
    spnum+=1
  end

end

function projectils_update()
  for projectil in all(projectils) do
    if projectil.flp then
      projectil.x -= 5.5
    else
      projectil.x += 5.5
    end
    for droid in all(droids) do
      --check collision des projectils
      if  collide_map(projectil,"right",0)
      or collide_map(projectil,"left",0)
      or (collide_obj(projectil,droid) and projectil.sp == 96)
      or (collide_obj(player,projectil) and projectil.sp == 81)
      or projectil.x > cam_x+128
      or projectil.x <  cam_x-8 then
        del(projectils,projectil)
        if (collide_obj(projectil,droid) and projectil.sp == 96) then
          explosion(droid.x,droid.y,droid.w/4+1,100)
          del(droids,droid)
          sfx(1)
        elseif collide_obj(player,projectil) and projectil.sp == 81 then
          player_dead()
        end
      end
    end
  end
end


function limit_speed(num,maximum)
return mid(-maximum,num,maximum)
end

--dessine la magnifique intro
function intro()
  titre="press ❎ to start!"
  chrono=(chrono+0.5)%10
  rectfill(0,0,127,127,1)
  for k,v in pairs(stars) do
    for i=0,0.01,0.001 do
      pset(
        v[1]*cos(skydeg+i)-
        v[2]*sin(skydeg+i)+
        63.5,
        v[2]*cos(skydeg+i)+
        v[1]*sin(skydeg+i)+
        63.5,
        7
      )
    end
  end
  str_to_spr(logo_miage,16,16,98,64)
  --sspr(80, 32, 48, 32,27,37,80,48) -- draw the 48 x 64 image from (80, 32) at screen location (27, 37) but stretched to 80 x 48
  print("a game made by miagestic",20,102,9)
  if (chrono<5) then
    print(titre,28,121,8)
    print(titre,29,120,9)
  else
    print(titre,28,120,8)
    print(titre,29,119,10)
  end
end


--dessine la croix interactive
function drawx(dx,dy)
  print("❎",dx,dy,6)
  rectfill(dx+1,dy,dx+4,dy+3,0)
  print("❎",dx,dy-flr(time()%1.05),7)
end


--pour faire les traits qui tourne
function intro_init()
  spsize = 64*sqrt(2)*2
  stars = {}
    for i=1,64 do
      add(stars, {
      rnd(spsize)-spsize/2,
      rnd(spsize)-spsize/2
      })
    end
  skydeg = 0
end


--equivalent de la fonction sleep
function wait(a) 
  for i = 1,a do 
    flip() 
  end 
end



function explosion(x,y,r,parti,c)
  local selected = 0
  for i=1,#sparks do
    if not sparks[i].alive then
      sparks[i].x = x
      sparks[i].y = y
      sparks[i].velx = -1 + rnd(2)
      sparks[i].vely = -1 + rnd(2)
      sparks[i].mass = 0.5 + rnd(2) 
      sparks[i].r = 0.5 + rnd(r)
      sparks[i].alive = true
      selected +=1
      if c then
        if c == 16 then
          sparks[i].c = flr(rnd(7)) + 8
          sparks[i].mass = 0.4 
        else
          sparks[i].c = c
        end
      else
        sparks[i].c = 5 + rnd(5)
      end
      if selected == parti then
      break end
    end
  end
end

function explosion_update()
  for i=1,#sparks do
    if sparks[i].alive then
      sparks[i].x += sparks[i].velx / sparks[i].mass
      sparks[i].y += sparks[i].vely / sparks[i].mass
      sparks[i].r -= 0.1
      if sparks[i].r < 0.1 then
        sparks[i].alive = false
      end
    end
  end
end

function draw_explosion()
  for i=1,#sparks do
    if sparks[i].alive then
      circfill(
        sparks[i].x,
        sparks[i].y,
        sparks[i].r,
        sparks[i].c
      )
    end
  end
end

function player_dead()
  player.alive = false
  if not hit then
    music(4)
    del_acc = 65 -- change pour delai avant restart
  end
  explosion(player.x+player.w/2,player.y+player.h/2,2,50,8)
  hit = true
end

function player_reset()
  reload(0, 0, 0x4300)--reload every block
  player={
    sp=plsp,--sprite du personnage
    x=checkpointx,--position x initiale
    y=checkpointy-32,--position y initiale
    w=8,--width la largeur en pixel du perso
    h=16,--height la hauteur en pixel du perso
    flp=false,--flip, faux si vers la droite et vrai si vers la gauche
    dx=0,--delta x, pour la vitesse de deplacement
    dy=0,--delta y, pour la vitesse de saut/chute
    max_dx=2,--vitesse max
    max_dy=3,--vitesse max
    acc=0.5,--acceleration, marche de pair avec delta x
    boost=4,--  marche de pair avec delta y 
    anim=0,--animation , pour regler le temps entre chaque frame
    proj=96, --le sprite du projectile
    fire = false, --si le joueur a deja tiré
    running=false,
    jumping=false,
    doublejump=false,
    falling=false,
    landed=false,
    alive = true,
    down = false,
    attak = false
    }
    droids = {} --pour pas qu'il se cummul on les supprime et recreer a chaque mort
    projectils={}
    --droid terrestre sprite 33
    if (level == 1) then
      create_droid(33,806,480,768,816) --dessine le sprite 33 à (110,480) se deplacant de (0,480) à (120,480)
      create_droid(33,964,480,912,944)
    end
    --droid volant sprite 42
    if (level == 2) then
      create_droid(42,208,288-24,176,224,272,296) 
      create_droid(42,248,280,230,260,272,296)
      create_droid(42,280,288,270,296,272,296)
      create_droid(42,336,288,320,360,272,296)
    end
      --platform volant sprite 64
    chrono=0 --sert pour animé le press x to play
    hit = false --si buffa a pris un coup
    del_acc = 0 -- pour creer un delay
    del_droid = 3
    del_title=12
    gauche = true -- pour le qcm highlight
    dialog = false
    talked = false
    if level == 1 then
      --music(6)  
    elseif level == 2 then
      music(9)
    end
end
function add_projectil(emeteur)
  local emx = 0
  if not emeteur.flp then 
    emx = emeteur.x + emeteur.w/2
  else
    emx = emeteur.x
  end
  add(projectils,{
    sp = emeteur.proj,
    x = emx,
    y = emeteur.y,
    w = 8, -- besoin de sa largeur et hauteur pour collide map
    h = 6,
    flp = emeteur.flp,
    c = emeteur.cp
  })
end

--creer les particules
function cr_part(x,y,c,s)
  local p={}
  p.x=x
  p.y=y
  p.c=c
  local angle=rnd(60)+270
  p.vsp=sin(angle/360)
  p.hsp=cos(angle/360)*s
  p.r=2+rnd(1)
  add(particles,p)
 end
function draw_part(p)
    circfill(p.x,p.y,p.r,p.c)
end
function update_part(p)
    p.r-=rnd(0.4)
    p.x+=p.hsp
    p.y+=p.vsp
    if (p.r<0) del(particles,p)
    if (p.r<0) del(particles,p)
end

function update_pv(p)
  for i=1,#p do
    if p[i].flp then
      p[i].x -=1
    else
      p[i].x+=1
    end
    if p[i].x < p[i].x1 then p[i].flp=false end
    if p[i].x > p[i].x2 then p[i].flp=true end
  end
end

function collide_pv(f,l)
  mset(f.x/8-1,f.y/8,103)
  mset(l.x/8+2,l.y/8,103)
  mset(f.x/8,f.y/8,98)
  mset(l.x/8,l.y/8,98)
  mset(l.x/8+1,l.y/8,98)
end

function create_droid(type,x,y,zx1,zx2,zy1,zy2)
  if type == 33 then
    add(droids,{
      sp=type,--droid terrestre
      x=x,--position x initiale
      y=y,--position y initiale
      w=16,--width la largeur en pixel du perso
      h=16,--height la hauteur en pixel du perso
      flp=false,--flip, faux si vers la droite et vrai si vers la gauche
      dx=0,--delta x, pour la vitesse de deplacement
      max_dx=0.7,--vitesse max
      acc=0.5,--acceleration, marche de pair avec delta x
      anim=0,--animation , pour regler le temps entre chaque frame
      zonex1 = zx1, --zone ou il vagabonde entre zonex1 et zonex2
      zonex2 = zx2,
      proj = 81,
      cp = 11
    })
  else
    add(droids,{
      sp=type, -- droid volant
      x=x,--position x initiale
      y=y,--position y initiale
      w=8,--width la largeur en pixel du perso
      h=8,--height la hauteur en pixel du perso
      flp=false,--flip, faux si vers la droite et vrai si vers la gauche
      dx=0,--delta x, pour la vitesse de deplacement
      dy=1,--delta y, pour la vitesse de saut/chute
      max_dx=0.7,--vitesse max
      acc=0.5,--acceleration, marche de pair avec delta x
      anim=0,--animation , pour regler le temps entre chaque frame
      zonex1 = zx1, --zone ou il vagabonde entre zonex1 et zonex2
      zonex2 = zx2,
      zoney1 = zy1, --zone ou il vagabonde entre zoney1 et zoney2
      zoney2 = zy2
    })
  end
end
function create_checkpoint(x,y)
  add(checkpoint,{ 
    sp=112,
    x=x, --position initiale
    y=y,
    h=8,
    w=8,
    flp=false, -- vers la gauche
    anim = 0
    }
  )
end
function create_pnj(n,sp,x,y,w,h)
  w = w or 8
  h = h or 16
  add(pnjs,{
    name=n,
    sp=sp,
    x=x,
    y=y,
    w=w,
    h=h,
    anim=0
  })
end


function create_p_volant(x,y,l,x1,x2)
  nbr_bloc +=1
  blocs[nbr_bloc] = {}
  for i=0,l-1 do
    add(blocs[nbr_bloc],{ 
      sp=64,
      x=x+i*8, --position initiale
      y=y*8,
      h=8,
      w=8,
      flp=false, -- vers la gauche
      f = 84,
      x1=x1+i*8,
      x2=x2+i*8
      }
    )
  end
end



function collide_obj(p,o,distance)
  local py = p.y  local d = distance or 0
  if player.down and p == player then py += 8 end
  return p.x<=o.x+o.w+d and
         o.x<=p.x+p.w+d and
         py<=o.y+o.h+d and
         o.y<=py+p.h+d
end


 function str_to_spr(s,x,y,w,h)
  for yy=0,h-1 do
   for xx=0,w-1 do
    local n=0
    local s=sub(s,xx+yy*w+1,xx+yy*w+1)
    if s~="a" then
      n=("0x"..s)+0
      pset(x+xx,y+yy,n)
    end
   end
  end
 end

--firework
function firework()
  local x =rnd(112) +12 local y = rnd(64) + 12
  if del_firework <= 0 then
    del_firework = rnd(10)
    rectfill(0, 0, 128, 128, 7)
    explosion(x,y,1,200,16)
    sfx(22)
  else
    del_firework -= 1
  end
end



__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000777000
079777000000000000797770007977700079777000797770079777f00079ff700000000000797770000000000079777000797770007977700000000000000700
0797ff000079777000797ff000797ff000797ff000797ff00797ff80007988f00000000000797ff00007977700797ff000797ff000797ff00000000007700070
099f1f0000797ff00099f1f00099f1f00099f1f00099f1f0099f1880009988f0000000000099f1f0000797ff0099f1f00099f1f00099f1f00007977700070007
099fff000099f1f00099fff00099fff00099fff00099fff0099f8880009988f0000000000099fff000099f1f0099fff00099fff00099fff0000797ff07007007
00ff00000099fff0000ff000000ff000000ff000000ff00000f88800000f880000000000090ff00009099fff090ff000090ff000090ff00000099f1f00700707
008800000088f000000880000008800000088000000880000088800000088800000000009998800099988f0099988000999880009998800009099fff00070700
08888000088880000088880000888800008888000088880008888000008888000000000009598800095988000959880009598800095988009990ff0000000000
08888000088880000088880000888800008888000088880008888000008888000079777000f59ff000f5988000f59ff000f5988000f59ff00959880000000000
08888000088880000088880008888880088888800888888088888000008888000099f1f0008f5999008f5ff9008f5999008f5ff9008f599900f5988888f00000
08ff800008ff8000008ff8000ff888f00f888ff00ff888f0f8888110008888000099fff00088955900889559008895590088955900889559008f599988f00000
0888800008888000008888000088880000888800008888000888811000888800088ff80000888999008889990088899900888999008889990088955900000000
01111000011110000011110001101100001101100110110001100110001111008888888800111100001111000011110001101100001101100088899900000000
0111100001111000001111000110110000110110011011000110011000111100ff1111ff00111100001111000011110001101100001101100111111000000000
01114400011110000011110001101100001101100110110001100440001111001110011100111440001111000011110001101100001101101100001100000000
04440000044440000044440004404400004404400440440004400000004444004400004400444000004444000044440004404400004404404400004400000000
06666660000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000
6ffffff6000060000006000000000000000000000000600600000000005555500900007009000077000000000055555005555555555555500000000000000000
6f1ff1f600063600006360000000300000030000000636636000000000ff555099900077999007707000000705fffff505f0000000000f500000000000000000
ffffffff00006366663600000000030000300000000063663600000000d1dd5009590770095900000770077005f1f1f505f0000000000f500000000000000000
0ff11ff000000633336000000000003333000000000006333360000000ffff500795900000959000007777000fff5fff05f0000000000f500000000000000000
00ffff000000637337360000000003733730000000006337360000000000ff00077959990709599907b77b7000f555f005ffffffffffff500000000000000000
0005500000063333333360000000333333330000000633336000000050033330770095590770955977777777000fff0005666ffffff666500000000000000000
55555555000066666666000000000000000000000000666600000000500333300000999977009999000000000ddd7ddd05786ffffff687500000000000000000
55555555066033333333066000003333333300006660333333330660555333300077777700000000000000000ddd7ddd05786f7676f687500000000000000000
f555555f6336333333336336033033333333033033363333333363360ff33330007aaaaa00000000000000000fdd7ddf05776f7676f677500000000000000000
f449944f63363333333363360330333333330330333633333333633600033330007aaaa900000000b000000b0fdd7ddf05666ffffff666500000000000000000
f110011f63363333333363360330333333330330666033333333633600033330007aaa9a000000000b0000b00fdd7ddf05555555555555500000000000000000
0110011006603333333306600000333333330000000033333333066000001110007aaa9a0000000000bbbb0000111110000005ffff5000000000000000000000
0ff00ff000003333333300000000333333330000000033333333000000001110007aaaa9000000000b7bb7b000111110000005ffff5000000000000000000000
f4f0f4f000006336633600000000033003300000000063366336000000001110007aaaaa00000000bbbbbbbb00111110000005ffff5000000000000000000000
44404440000063300336000000000330033000000000633003360000000444400077777700000000000000000044444000055555555550000000000000000000
bbbbbbbb44444444cc3b3bcccccccccc66666666666666664444444469999996ccccccc0c342cbcc2ccccccc0000000000000000000000000000000000000000
bbbbb3b344444444c3b3bbbccccccccc66666666666666664999999466777766cccccbb33c44303c3ccccccc0000000000000000000000000000000000000000
3b3bb33344444444333bbbb3cccccccc66666666666666664911119466666666ccccc303ccb43333bbc0cccc0000000000000000000000000000000000000000
1333313144444444bbbbbbbb4644464466666666999999994917719466666666ccc0344333b33434bc33cccc0000000000000000000000000000000000000000
1343141444444444333bbb3bc6ccc6cc66666666959595954911119466666666cccc3b44c33034233303cccc0000000000000000000000000000000000000000
414144444444444433b3b3bb4644464466666666555555554999999466666666cccb33343343c4333b432ccc0000000000000000000000000000000000000000
4444444444444444cb333bbcc6ccc6cc66666666555555554999999466666666cc23c2343333443b4443bccc0000000000000000000000000000000000000000
4444444444444444ccc49ccc55555555666666665d5d5d5d4999999466666666ccc3c334433343b44033bb0c0000000000000000000000000000000000000000
cccccccc0000000000000000ccc6556666556ccc000000004955999400666666c0333303230c43343cc433cc0000000000000000000000000000000000000000
ccc77ccc0000000000000000ccc6556666556ccc000000004999999400666666c443bc333344334233323cbc0000000000000000000000000000000000000000
cc7777cc3333333300000000ccc6c666666c6ccc000000004999999400044666c344333b43323c3cbb4333bc0000000000000000000000000000000000000000
c777777cbbbbbbbb00000000ccc6c666666c6ccc000000004999999400014666cbb0444234433344443b442c0000000000000000000000000000000000000000
77777777bbbbbbbb00000000ccc6c666666c6ccc000000004999999400014666b3b33b53bb305443333b33cb0000000000000000000000000000000000000000
777777773333333300000000ccc6c666666c6ccc000000004999999400014666c3333044c4534cc33c2330bb0000000000000000000000000000000000000000
cccccccc0000000000000000ccc6c666666c6ccc000000004999999400014666bc3b333354423444443333b20000000000000000000000000000000000000000
cccccccc0000000000000000ccc6c666666c6ccc000000004444444400014666cbbb3234454334333444c3cc0000000000000000000000000000000000000000
00999999bbbbbbbbccccccccccc6c666666c6ccc4444444444444444cccccccc04444443334435423324403c0000000000000000000000000000000000000000
00900009bbbbb3b3ccccccccccc6c666666c6ccc4444444444444444cccccccc34323c34c45404c433b33bbc0000000000000000000000000000000000000000
009999993b3bb333ccccccccccc6556666556ccc7555557dddddddddcccccccccbc3b342c35444cc2cbb2bcc0000000000000000000000000000000000000000
0090000913333131cccccccc64465566665564647111117666666666ccccccccc3bbb03ccc4455cccc0ccccc0000000000000000000000000000000000000000
0090000913431414cccccccc6cc6cc6666c6cc6c7117117666666666ccccccccccb2cccccc54445ccccccccc0000000000000000000000000000000000000000
0090000941414444cccccccc64464466664644647177717666666666cccccccccccccccc54445544cccccccc0000000000000000000000000000000000000000
9990099944445444cccccccc6cc6cc6666c6cc6c7555557666666666cccccccccccccc54545454555544cccc0000000000000000000000000000000000000000
9900099044445544cccccccc55555566665555556dddddd666666666cccccccccccc54454544554554545ccc0000000000000000000000000000000000000000
4444444404444440004444000004400000444400dddddddddddddddd445445440000000000000000000000000000000000000000000000000000000000000000
45545554045455400044540000044000004544005555555555555555445445440000000000000000000000000000000000000000000000000000000000000000
44444444044444400044440000044000004444004777777777776654222222220000000000000000000000000000000000000000000000000000000000000000
45554554045545400044540000044000004544004711117111176654666665660000000000000000000000000000000000000000000000000000000000000000
44444444044444400044440000044000004444004711117111176654665666560000000000000000000000000000000000000000000000000000000000000000
44444444044444400044440000044000004444004711117111176654566666660000000000000000000000000000000000000000000000000000000000000000
00044000000440000004400000044000000440004711117111176654222222220000000000000000000000000000000000000000000000000000000000000000
00044000000440000004400000044000000440004777777777776654666666660000000000000000000000000000000000000000000000000000000000000000
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777725252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
44744444744444744474444444744444444474444474444444744474444444744444447444447444447444744444744425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
44444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
54645454545454545454545454545454645454545454545454545454545454645454545454545454545454545454645425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
44654444444444444444444444444444654444444444444444444444444444654444444444444444444444444444654425252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777725252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f7f72525252525252525252525252525252525252525252525252525252525252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
2525252525252525252525252525252525252525252525252525252525f4f4f4f4f4f4f4f4f42525252525252525252525252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
25252525252525252525252525252525252525252525252525252525f425f4f4f4f4f4f4f4f4f4f4f4f4f4252525252525252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
25252525252525252525252525252525252525252525252525252525f4f4f4f4f4f4f4f4f4f42525252525252525252525252525f7f7f4f47676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566666666666666666666666666664576767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676760505050505057676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566665656665656665656665656664576767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566666666666666666666666666664505050505767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767605050505057676767676767605057676767676767676
76767676767676767676767676050505053544444444444444444444444444444576767676767676767676767676767676767676767676767676767676767676
76050505050505767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566565666565666565666565666664576767676767676767676767676767676767676767676767676050505057676
76767676767676767676767676760505050576767676767676760505057676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566666666666666666666666666664576767676767676767676767676767605050505767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76760505057676767676767676767676763544444444444444444444444444444576767676760505057676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566665656665656665656665656664576767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566666666666666666666666666664576767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763544444444444444444444444444444576767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676767676767676767676767676767676767676767676767676767676760404767676767676767676767676767676767676
76767676767676767676767676767676763566565666565666565666565666664576767676767676767676767676767676767676767676767676767676767676
7676767676768494a476767676767676767676767676767676767676761616167676767676767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763566666666666666666666666666664576767676767676767676767676767676767676767676767676767676767676
7676767676768595a576767676767676767676767676767676767676767676767676767624767676767676767676767676767676767676767676767676767676
76767676767676767676767676767676763544444444444444444444444444444576767676767676767676767676767676767676767676767676767676767664
7624767676768696a676767676767676767676767676767604767676767676767676760404040476767676767676767676767676767676767676767676343434
34343434343434343434343434343434343644444444444444444444444444444634343434343434343434343434343434343434343434343434343434343465
04040404040404040404047676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676040404
04040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404040404
14141414141414141414147676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676141414
14141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414141414
__label__
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111111111111111111111111
11111171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111771111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
71111111111111111111111111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111771111111111111111111111111111111111711111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111777711111111177111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111777711111111111111111111111111111111771111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111117711111111111111111111111111111111111171111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11771111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
17711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
77111111111111111111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
71111111111111111111111111111111111777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111711111111111111111111111111111111111
11111111111111111111111177111111111111111111111111111111111111111111111111111111111111111111177111111111111111111111111111111111
11111111111111111111111771111111111111111111111111111111111111111111111111111111111111111111117111111111111111111111111171111111
11111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111171111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111711111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111711111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111771111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111177111111111111111111111
11111111111111111111111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111177171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111171111111111111111777777777777777777777711111111111111177777777711111111111111111111111111111111111111111
11111111111111111111111711111111111111111777777777777777777777711111111111111177777777711111111111111111111111111111111111111111
11111111111111111111111711111111111111111777777777777777777777711111111111177777777777711111111111111111111111111111111111111111
11111111111111111111111111111111111111111777777777777777777777711111111177777777777777711111111111111111111111111111111111111111
11111111111111111111111111111111111111111777777777777777777777711111111177777777777777711111111111111111111111111111111111111111
11111111111111111111111111111111111111111777777777777777777777711111111777777777711111111111111117111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111177777777711199999999911111117111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111177777777711199999999911111117711111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111777777711111199999999999999111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111777777111111199999999999999911111111111111111111111111111111
11111111111111111111111111111111111111111111117111111111111111111111777777111111199999999999999911111111111111111111111111111111
11111111111111111117711111111111111111111111117111111111111111111177777711111111111111111111999999111111111111111111111111111111
111111111111111111171111111111111111111117777777111111111111111117777777111111111111cccccccc199999911111111111111111111111111111
111111111111111111171111111111111111111117777777111111111111111117777777111111111111cccccccc199999911111111111111111111111111111
111111111111111111171111111111111111111117777777777771111111111117777771111111111ccc77777777c11999911111111111111111111111111111
11111111111111111111111111111111111111111777777777777711111111111777777111111111cccc777777ccc77199999111111111111111111111111111
11111111111111111111111111111111111111111777777777777711111111111777777111111111cccc777777ccc77199999111111111111111111111111111
111111111111111111111111111111111111111111111117777777771111111777777111111111cccccc777cc7ccc77c11999111111111111111111111111111
11111111111111111111111111111111111111111111111111777777711111177777711111111c777ccccccccccc7ccc11999911111111111111111111111111
11111111111111111111111111111111111111111111111111777777711111177777711111111c777ccccccccccc7ccc11999911111111111111111111111111
11111111111111111111111111111111111111111111111111177777777111177777711117111c777ccc77cccccc7cc711999911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777111177777711117111c77cccc777cccccccc7cc199911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777111177777711111111c77cccc777cccccccc7cc199911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711177777711111111c77ccc777ccccccccc7cc199911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711177777711111111c77cccc77ccccccccc711999911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711177777711111111c77cccc77ccccccccc711999911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711177777711111111c77cccc77777ccccccc11999911111111111111111111111111
111111111111111111111111111111111111111111111111111117777777111777777111111111cc7cccccc777cccccc11999911111111111111111111111111
111111111111111111111111111111111111111111111111111117777777111777777111111111cc7cccccc777cccccc11999911111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711177777777111111111c777ccccc7ccccc199999111111111111111111111111111
111111111111111111111111111111111111111111111111111117777777111777777771111111111cc777ccccccc11999999111111111111111111111111111
111111111111111111111111111111111111111111111111111117777777111777777771111111111cc777ccccccc11999999111111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711111777777711111111111ccccccccc199999911111111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711111177777711111111111111111111999999111111111111111111111111111111
11111111111111111111111111111111111111111111111111111777777711111177777711111111111111111111999999111111111111111111111111111111
11111111111111111111111111111111111111111111111111177777777111111177777777111111111111111111999911111111111111111111111111111111
11111111111111111111111111111111111111111111111111777777777111111111777777711111111111111111999111777111111111111111111111111111
11111111111111111111111111111111111111111111111111777777777111111111777777711111111111111111999111777111111111111111111111111111
11111111111111111111111111117711177711111111111177777777711111111111177777777711111111111111111777777711111111111111111111111111
11111111111111111111111111111711777777711111177777777777111111111111111777777777777111111177777777777711111111111111111111111111
11111111111111111111111111111711777777711111177777777777111111111111111777777777777111111177777777777711111111111111111111111111
11111711111111111111111111111111777777777777777777777711111111111111111177777777777777777777777777777111111111111111111111111111
11111711111111111111111111111111177777777777777777777111111111111111111111177777777777777777777777111111111111111111111111111111
11111711111111111111111111111111177777777777777777777111111111111111111111177777777777777777777777111111111111111111111111111111
11111171111111111111111111111111111177777777777777111111111111111111111111111177777777777777777111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111117711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111711111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111771111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111177111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111171111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111771111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111711111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111999111111991999199919991111199919991991199911111999191911111999199919991199199911991999199919191111111111111
71111111111111111111919111119111919199919111111199919191919191111111919191911111999119119191911191119111191119119191111111111111
11111111111111111111999111119111999191919911111191919991919199111111991199911111919119119991911199119991191119119911111111111111
11111111111111111111919111119191919191919111111191919191919191111111919111917711919119119191919191111191191119119191111111111111
11111111111111111111919111119991919191919991111191919191999199911111999199971111919199919191999199919911191199919191111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111771111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111117711111111111111111111111111111111
71111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111171111111111111111111111111111111111
71111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111177771111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111177711111111111111111111111111111111111111111111111
11111111111111111111111111117999199919991199119911111199999111111999119911111799199919991999199911911111111111111111111111111111
11111111111111111111111111118989898989811981198111111998989911118891198911111981889189898989889118911111111111111111111111111111
11111111111111111111111111118999899189918999899911118999199911111891898911118999189189998991189118977111111111111111111111111111
11111111111111111111111111118981891989118889888977118991989911111891898911118889189189898919189118771111111111111111111111111111
11111111111111111111111111118911898989991991199117778899999111111891899111111991189189898989189177911111111111111111111111111111
11111111111111111111111111118111818188818811881111111888881111111811881111118811181181818181181118111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111

__gff__
0000000000000000000400000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000000000000000000001030000800010000000000000000000000003000000100000000000000000000005090000000080000000000000000000000000000000010000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
5167676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676762676767676767676767676767676767676767
6743436767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676743434367676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676743434343676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767434343434367676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767404142676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676745464767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6740414142676755566767676767676767676767404141426767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676765666767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
7767676767676775767753535353535353535367676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
4141414141414141414141414141414141414142676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
5151515151515151676767676767676767676752676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767674041426767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
6767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f525252525252525252525252525252525252525252525252525252525252524f4f4f4f676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f5252525252525252525252525252525252525252525252525252525252524f4f4f4f4f676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f52525252525252525252525252525252525252525252525252525252525252524f4f4f4f676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f4f52525252525252525252525252525252525252525252525252525252525252524f4f4f4f676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767676767
__sfx__
010a0000186142461330615000001861424613306133c615000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
010702000065400651006510064100641006510063100641006410063100621006110062100611006110061500000000000000000000000000000000000000000000000000000000000000000000000000000000
011000001d7341d730217302173024730247302973029730297302973029730297302973029730297302973524000000000000000000000000000000000000000000000000000000000000000000000000000000
011000000000000000000000000000000000000e0140e0100e0100e0100e0100e0100e0100e0100e0100e01500000000000000000000000000000000000000000000000000000000000000000000000000000000
011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000001d7501d7501c7501c7501a7501a75019750167501575015750157501575015750157501575015750187001870018700187001870018700187000c7000c7000c7000c7000c7000c7000c7000070000700
011000000000000000000000000000000000000000000000097220972209722097220972209722097220972200002000000000000000000000000000000000000000000000000000000000000000000000000000
011000000000000000000000000000000000000000000000045220452204522045220452204522045220452200000000000000000000000000000000000000000000000000000000000000000000000000000000
010800001c0441c0351c0041c0051c0041c0051c0041c005000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
01100000137300c7000c7000c70013730000000000000000137300c7000c7000c70013730000000000000000137300c7000c7000c70013730000000000000000137300c7000c7000c700137300c7000c70015740
01100000020300000000000000000203000000000000000002030000000000000000020300000000000000000203000000000000000002030000000000000000020300000000000000000203000000000000e020
011000000b7140b7100b7100b7100b7100b7100b7100b710100101001010010100101001010010100101001009010090100901009010090100901009010090100c0100c0100c0100c0100c0130c0140c0130c013
011000000000000000000000000000000000000000000000000000000000000000001c6251c6251c6251c6250000000000000000000000000000000000000000000000000000000000001c6351c6251c6251c635
011000001d7341d7301d7301f73020730207302073020730007000070000700007000070000700007000070025730257302573025730247302473024730247350070000700007000000000000000000000000000
011000001d7341d7301d7301f73020730207302073020730007000070000700000000000000700257242573027730277302773027730227302273022730227302473024730247302473500700007000000000000
011000000b0100b0100b0100b0100b0100b0100b0100b010100101001010010100101001010010100101001009010090100901009010090100901009010090100c0100c0100c0100c0100c0140c0140c0130c013
011000001d7141d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101d7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f7101f715
011000000e0140e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100c0000c00000000000000e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100e01000000000000000000000
011000001d7300070000700007001f73000700007000070021730007001f730007001d7300070013730007001d73000700007000070021730007000070000700247300070021730007001d7301a7301873000700
011000001a7300070000700007001d7300070000700007001d7300070021730007001d730007001a7300070021730007000070000700247300070000700007002873000700267300070024730217301d73000700
011000001c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c7101c71021710217102171021710217102171021710217102171021710217102171021710217102171021715
011000000c0100c0100c0100c0100c0100c0100c0100c0100c0100c0100c0100c010000000000000000000000e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100e0100e01000000000000000000000
011000000063100621006210061100611006110061100615000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
011000001552415520155201552015520155201552015525185241852018520185201852018520185201852517524175201752017520175201752017520175251c5241c5201c5201c5201c5201c5201c5201c525
011000001102411020110201102511024110201102011025100241002010020100251002410020100201002513024130201302013025130241302013020130251502415020150201502515024150201502015025
011000000c7240c7200c7200c7200c7200c7200c7200c7200c7200c7200c7200c7200c7200c7200c7200c7250e7240e7200e7200e7200e7200e7200e7200e7200e7200e7200e7200e7200e7200e7200e7200e725
01100000217550070500705007051c745007051875500705247550070500705007051c745007051875500705237550070500705007051f745007051a755007052875500705007050070524745007051a75500705
__music__
04 41014344
44 0203044f
40 004b4444
43 4b444474
44 05060744
44 08444444
41 090a4b0c
40 090a0d0c
42 090a0e0c
41 0b444444
43 0f444444
41 10111244
42 14151364
43 1718191a
50 54555358
40 44444444
40 54545454
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444
44 44444444

